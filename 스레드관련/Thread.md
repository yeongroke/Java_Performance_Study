# Thread 란 ( 스레드 )
<br><br>
## 개념 - 일반적으로 아래와 같이 말한다.. 넘 딱딱하긴하지만.. 아래 설명과 같다..
### Thread란 하나의 프로세스에서 단독적으로 실행되는 하나의 작업 단위 또는 하나의 공간으로 볼 수 있습니다.
#### Thread 메모리 구조는 code, data, stack, heap으로 4군데로 나눠져있으며 이중에 stack영역만 비공유하고있다.
#### java 8과 11에서는 기본적으로 1MB의 메모리를 예약 할당한다.
### 발생할 수 있는 문제점 
#### 무분별한 스레드 생성은 안하는 것이 좋다.. 스레드를 너무 많이 생성하면 메모리를 많이 차지할 뿐만 아니라 멀티 스레드환경에서 스레드끼리 컨텍스트 스위칭하는 시간이 오버되므로 적당한 스레드만 생성하는 것이 좋다.
### 위와 같은 문제점을 해결하기 위한 방법
#### ThreadPool방법이 있지만 이 방법도 교착 상태 또는 무한 대기 , 노는 스레드가 발생할 수 있다. 이 부분은 추후 다른 글에서 설명하겠습니다.
<br><br>

## 프로세스와 스레드 메모리구조
<img src="https://user-images.githubusercontent.com/42057185/166747994-68f6c7b1-94b5-4c2c-bdb8-e09a704eef2c.png"/>

<br><br>

## Thread 생성 방법
<br>

### Thread 사용
<img src="https://user-images.githubusercontent.com/42057185/166498033-c4a50bb1-9388-4a81-a6b8-cc74e69b0424.png"/>
<br><br>

### Runnable 사용
<img src="https://user-images.githubusercontent.com/42057185/166496813-b6b5cc73-bfc3-4a40-b598-3b564baa84e5.png"/>
<br><br>

## Thread 우선순위 방식
### 우선순위 방식
### 순환할당 방식

<br><br>
## 메모리 구조
<img src="https://user-images.githubusercontent.com/42057185/166732421-85d06348-74e0-4363-9492-89e4357e92f7.png"/>

<br><br>
## 동기화 문제 해결 방법 ( 동기화 - 한 스레드가 진행 중이라면 다른 스레드가 간섭하지 못하도록 막는 것 )
### 1. Synchronized 선언방식
#### 동작원리 : 하나의 블럭이 만들어지는 걸로 동시에 하나의 스레드만 접근이 가능하다, 즉 실행이 끝날 때까지는 다른 스레드는 접근이 불가능하다.
#### 방식 : 메서드 전체를 임계영역으로 지정하거나 어느 특정영역을 임계영역으로 지정하여 필요한 부분만 임계영역으로 지정하는 효율적인 프로그래밍을 하여야 한다.
#### 문제점 : 특정 스레드가 해당 블락 자체를 락(lock)하기 때문에 다른 스레드는 아무 작업을 못하고 기다리는 상황이 생겨 낭비가 발생한다.<br>
### 2. volatile 선언방식
#### 동작원리 : 선언한 영역에서 
#### volatile 키워드란 Main Memory에 저장되는 걸로 명시하는 것이다. Cpu의 캐시에 저장된 값이 아닌 Main Memory에서 읽는다.
#### 문제점 : 모든 동기화 문제가 해결되는 것은 아니고 단지 최신 값을 보여주는 것이다.
#### 언제 사용 ? : 멀티 스레드 환경에서 하나의 스레드만 읽기 그리고 쓰기만 하고 나머지 스레드는 읽기만 하는 경우에만 가장 최신의 값을 가져오기 때문에 적합하다.
#### 만약에 멀티 스레드 환경에서 여러 스레드가 쓰기를 하는 경우에는 volatile대신에 atomic를 사용하는 것을 추천한다.<br>
## 위와 같은 동기화 문제 해결방법들의 문제점을 해결하기 위해 나온 해결방법
### 3. Atomic ( jdk 1.5 버전부터 지원 )
#### 동작원리 : NonBlocking 방식을 사용하기 때문에 기존 Synchronized 방식의 스레드가 놀게되는 문제점을 방지할 수 있다.
#### Atomic에는 Integer, String, Long, Array 등등 여러 타입이 존재한다.<br>
### 4. 이뿐만 아니라 Concurrent 클래스를 사용하면 Thread safe하게 사용을 할 수 있다.<br>
### 5. ThreadLocal 


